document.addEventListener("DOMContentLoaded",function(){const e=new Lenis;requestAnimationFrame(function t(o){e.raf(o),requestAnimationFrame(t)});const t=document.querySelector(".hero > img");t&&e.on("scroll",({scroll:e})=>{t.style.transform=`translateY(calc(-50% + ${.4*e}px))`}),setTimeout(()=>{const e=document.querySelector(".hero .sub-title");e&&e.classList.add("show")},500);const o=document.querySelector("#about-me .side img");function r(e,t){let o;return function(...r){clearTimeout(o),o=setTimeout(()=>{clearTimeout(o),e(...r)},t)}}let n;o&&new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("visible"),t.unobserve(e.target))})},{threshold:.1}).observe(o);const a=r(c,250);function c(){const e=document.getElementById("cryptoChart");if(!e||"undefined"==typeof Chart)return;const t=e.getContext("2d"),o=t.createLinearGradient(0,0,0,e.height);o.addColorStop(0,"rgba(212, 180, 131, 0.5)"),o.addColorStop(1,"rgba(212, 180, 131, 0)"),n&&n.destroy(),n=new Chart(t,{type:"line",data:{labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],datasets:[{label:"Portfolio Value",data:[100,105,103,110,115,120,125],borderColor:"#D4B483",backgroundColor:o,fill:!0,tension:.3,pointRadius:3,pointBackgroundColor:"#D4B483"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:!1,tooltip:{intersect:!1}},scales:{x:{grid:{color:"rgba(255,255,255,0.05)"},ticks:{color:"#ccc"}},y:{grid:{color:"rgba(255,255,255,0.05)"},ticks:{color:"#ccc"}}}}})}window.addEventListener("resize",a);const s=document.getElementById("crypto"),i=new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&(c(),t.unobserve(e.target))})},{rootMargin:"200px 0px"});let l;s&&i.observe(s);const d=r(u,250);function u(){const e=document.getElementById("sophiaChart");if(!e||"undefined"==typeof Chart)return;const t=e.getContext("2d");l&&l.destroy(),l=new Chart(t,{type:"bar",data:{labels:["Float32","BFloat16","Float16"],datasets:[{label:"Original SophiaG",data:[38.66,16.53,16.34],backgroundColor:"#A4B8C4",borderColor:"#A4B8C4",borderWidth:1},{label:"AdamW (fused)",data:[12.8,11.31,11.39],backgroundColor:"#888888",borderColor:"#888888",borderWidth:1},{label:"Triton SophiaG",data:[12.98,6.51,6.39],backgroundColor:"#D4B483",borderColor:"#D4B483",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:"#1c1c1c"}},tooltip:{callbacks:{label:function(e){let t=e.dataset.label||"";return t&&(t+=": "),null!==e.parsed.y&&(t+=e.parsed.y+" ms/step"),t}}}},scales:{x:{grid:{color:"rgba(0,0,0,0.05)"},ticks:{color:"#333"}},y:{beginAtZero:!0,title:{display:!0,text:"Time (ms/step)",color:"#333"},grid:{color:"rgba(0,0,0,0.05)"},ticks:{color:"#333"}}}}})}window.addEventListener("resize",d);const m=document.getElementById("sophia"),g=new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&(u(),t.unobserve(e.target))})},{rootMargin:"200px 0px"});m&&g.observe(m);const p=document.querySelector(".nav"),b=p.querySelector(".nav-indicator"),v=p.querySelectorAll("a"),f=document.querySelector(".scroll-indicator a");function h(e){if(!e)return;const t=e.offsetWidth,o=e.offsetLeft;b.style.width=`${t}px`,b.style.transform=`translateX(${o}px)`}const y=document.querySelector('.nav a[href="#home"]');y&&(y.classList.add("active"),requestAnimationFrame(()=>h(y)));const w=document.querySelectorAll("main > section[id]");let E=!1;const L=new IntersectionObserver(e=>{E||e.forEach(e=>{if(e.isIntersecting){const t=e.target.getAttribute("id"),o=document.querySelector(`.nav a[href="#${t}"]`);v.forEach(e=>e.classList.remove("active")),o&&(o.classList.add("active"),h(o))}})},{rootMargin:"-50% 0px -50% 0px"});let C;function S(t){t&&(E=!0,e.scrollTo(t),history.replaceState(null,null,window.location.pathname))}w.forEach(e=>L.observe(e)),e.on("scroll",()=>{clearTimeout(C),C=setTimeout(()=>{E=!1},150)}),v.forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),v.forEach(e=>e.classList.remove("active")),e.currentTarget.classList.add("active"),h(e.currentTarget);const t=()=>{E=!1,window.removeEventListener("wheel",t),window.removeEventListener("touchstart",t)};window.addEventListener("wheel",t,{once:!0}),window.addEventListener("touchstart",t,{once:!0});const o=e.currentTarget.getAttribute("href").replace("#","");S(document.getElementById(o))})}),f&&f.addEventListener("click",e=>{e.preventDefault();const t=e.currentTarget.getAttribute("href").replace("#","");S(document.getElementById(t));const o=document.querySelector('.nav a[href="#about-me"]');o&&(v.forEach(e=>e.classList.remove("active")),o.classList.add("active"),h(o))}),window.addEventListener("resize",()=>{h(document.querySelector(".nav a.active"))}),document.querySelectorAll("video").forEach(e=>{e.addEventListener("click",()=>{e.paused?e.play():e.pause()})})});